!function(t){"use strict";window.ygritte__Q=function(){"use strict";function t(t){return function(){return H.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===tt(t)||t instanceof U}function r(t,e){if(J&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(et)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+et+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];u(o)||i(o)||!o||n.push(o)}return n.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function c(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=c(t);if(!e)return!1;var n=e[0],r=e[1];return n===$&&r>=V&&r<=it}function s(){if(J)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=c(e);if(!n)return;return $=n[0],n[1]}}function a(t){return t instanceof d?t:g(t)?S(t):T(t)}function f(){function t(t){e=t,i.source=t,G(n,function(e,n){a.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],o=K(f.prototype),i=K(d.prototype);if(i.promiseDispatch=function(t,o,i){var c=W(arguments);n?(n.push(c),"when"===o&&i[1]&&r.push(i[1])):a.nextTick(function(){e.promiseDispatch.apply(e,c)})},i.valueOf=function(){if(n)return i;var t=y(e);return v(t)&&(e=t),t},i.inspect=function(){return e?e.inspect():{state:"pending"}},a.longStackSupport&&J)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){e||t(a(n))},o.fulfill=function(n){e||t(T(n))},o.reject=function(n){e||t(O(n))},o.notify=function(t){e||G(r,function(e,n){a.nextTick(function(){n(t)})},void 0)},o}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=f();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function l(t){return p(function(e,n){for(var r=0,o=t.length;r<o;r++)a(t[r]).then(e,n)})}function d(t,e,n){void 0===e&&(e=function(t){return O(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=K(d.prototype);if(r.promiseDispatch=function(n,o,i){var c;try{c=t[o]?t[o].apply(r,i):e.call(r,o,i)}catch(t){c=O(t)}n&&n(c)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function h(t,e,n,r){return a(t).then(e,n,r)}function y(t){if(v(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function v(t){return t instanceof d}function g(t){return e(t)&&"function"==typeof t.then}function m(t){return v(t)&&"pending"===t.inspect().state}function w(t){return!v(t)||"fulfilled"===t.inspect().state}function j(t){return v(t)&&"rejected"===t.inspect().state}function k(){nt.length=0,rt.length=0,ot||(ot=!0)}function b(t,e){ot&&(rt.push(t),e&&void 0!==e.stack?nt.push(e.stack):nt.push("(no stack) "+e))}function x(t){if(ot){var e=X(rt,t);-1!==e&&(rt.splice(e,1),nt.splice(e,1))}}function O(t){var e=d({when:function(e){return e&&x(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return b(e,t),e}function T(t){return d({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return Z(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var e=f();return a.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function _(t){return d({isDef:function(){}},function(e,n){return D(t,e,n)},function(){return a(t).inspect()})}function R(t,e,n){return a(t).spread(e,n)}function E(t){return function(){function e(t,e){var c;if("undefined"==typeof StopIteration){try{c=r[t](e)}catch(t){return O(t)}return c.done?a(c.value):h(c.value,o,i)}try{c=r[t](e)}catch(t){return n(t)?a(t.value):O(t)}return h(c,o,i)}var r=t.apply(this,arguments),o=e.bind(e,"next"),i=e.bind(e,"throw");return o()}}function N(t){a.done(a.async(t)())}function A(t){throw new U(t)}function C(t){return function(){return R([this,I(arguments)],function(e,n){return t.apply(e,n)})}}function D(t,e,n){return a(t).dispatch(e,n)}function I(t){return h(t,function(t){var e=0,n=f();return G(t,function(r,o,i){var c;v(o)&&"fulfilled"===(c=o.inspect()).state?t[i]=c.value:(++e,h(o,function(r){t[i]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:i,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function P(t){if(0===t.length)return a.resolve();var e=a.defer(),n=0;return G(t,function(r,o,i){function c(t){e.resolve(t)}function u(){0===--n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function s(t){e.notify({index:i,value:t})}var a=t[i];n++,h(a,c,u,s)},void 0),e.promise}function q(t){return h(t,function(t){return t=z(t,a),h(I(z(t,function(t){return h(t,Q,Q)})),function(){return t})})}function M(t){return a(t).allSettled()}function B(t,e){return a(t).then(void 0,void 0,e)}function L(t,e){return a(t).nodeify(e)}var J=!1;try{throw new Error}catch(t){J=!!t.stack}var $,U,V=s(),Q=function(){},F=function(){function t(){for(;e.next;){e=e.next;var n=e.task;e.task=void 0;var o=e.domain;o&&(e.domain=void 0,o.enter());try{n()}catch(e){if(i)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),e;setTimeout(function(){throw e},0)}o&&o.exit()}r=!1}var e={task:void 0,next:null},n=e,r=!1,o=void 0,i=!1;if(F=function(t){n=n.next={task:t,domain:i&&process.domain,next:null},r||(r=!0,o())},"undefined"!=typeof process&&process.nextTick)i=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){o=u,c.port1.onmessage=t,t()};var u=function(){c.port2.postMessage(0)};o=function(){setTimeout(t,0),u()}}else o=function(){setTimeout(t,0)};return F}(),H=Function.call,W=t(Array.prototype.slice),G=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),X=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),z=t(Array.prototype.map||function(t,e){var n=this,r=[];return G(n,function(o,i,c){r.push(t.call(e,i,c,n))},void 0),r}),K=Object.create||function(t){function e(){}return e.prototype=t,new e},Y=t(Object.prototype.hasOwnProperty),Z=Object.keys||function(t){var e=[];for(var n in t)Y(t,n)&&e.push(n);return e},tt=t(Object.prototype.toString);U="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";a.resolve=a,a.nextTick=F,a.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(a.longStackSupport=!0),a.defer=f,f.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(W(arguments,1)):t.resolve(n)}},a.Promise=p,a.promise=p,p.race=l,p.all=I,p.reject=O,p.resolve=a,a.passByCopy=function(t){return t},d.prototype.passByCopy=function(){return this},a.join=function(t,e){return a(t).join(e)},d.prototype.join=function(t){return a([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},a.race=l,d.prototype.race=function(){return this.then(a.race)},a.makePromise=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(t,e,n){function o(e){try{return"function"==typeof t?t(e):e}catch(t){return O(t)}}function i(t){if("function"==typeof e){r(t,u);try{return e(t)}catch(t){return O(t)}}return O(t)}function c(t){return"function"==typeof n?n(t):t}var u=this,s=f(),p=!1;return a.nextTick(function(){u.promiseDispatch(function(t){p||(p=!0,s.resolve(o(t)))},"when",[function(t){p||(p=!0,s.resolve(i(t)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=c(t)}catch(t){if(n=!0,!a.onerror)throw t;a.onerror(t)}n||s.notify(e)}]),s.promise},a.tap=function(t,e){return a(t).tap(e)},d.prototype.tap=function(t){return t=a(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},a.when=h,d.prototype.thenResolve=function(t){return this.then(function(){return t})},a.thenResolve=function(t,e){return a(t).thenResolve(e)},d.prototype.thenReject=function(t){return this.then(function(){throw t})},a.thenReject=function(t,e){return a(t).thenReject(e)},a.nearer=y,a.isPromise=v,a.isPromiseAlike=g,a.isPending=m,d.prototype.isPending=function(){return"pending"===this.inspect().state},a.isFulfilled=w,d.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},a.isRejected=j,d.prototype.isRejected=function(){return"rejected"===this.inspect().state};var nt=[],rt=[],ot=!0;a.resetUnhandledRejections=k,a.getUnhandledReasons=function(){return nt.slice()},a.stopUnhandledRejectionTracking=function(){k(),ot=!1},k(),a.reject=O,a.fulfill=T,a.master=_,a.spread=R,d.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},a.async=E,a.spawn=N,a.return=A,a.promised=C,a.dispatch=D,d.prototype.dispatch=function(t,e){var n=this,r=f();return a.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},a.get=function(t,e){return a(t).dispatch("get",[e])},d.prototype.get=function(t){return this.dispatch("get",[t])},a.set=function(t,e,n){return a(t).dispatch("set",[e,n])},d.prototype.set=function(t,e){return this.dispatch("set",[t,e])},a.del=a.delete=function(t,e){return a(t).dispatch("delete",[e])},d.prototype.del=d.prototype.delete=function(t){return this.dispatch("delete",[t])},a.mapply=a.post=function(t,e,n){return a(t).dispatch("post",[e,n])},d.prototype.mapply=d.prototype.post=function(t,e){return this.dispatch("post",[t,e])},a.send=a.mcall=a.invoke=function(t,e){return a(t).dispatch("post",[e,W(arguments,2)])},d.prototype.send=d.prototype.mcall=d.prototype.invoke=function(t){return this.dispatch("post",[t,W(arguments,1)])},a.fapply=function(t,e){return a(t).dispatch("apply",[void 0,e])},d.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},a.try=a.fcall=function(t){return a(t).dispatch("apply",[void 0,W(arguments,1)])},d.prototype.fcall=function(){return this.dispatch("apply",[void 0,W(arguments)])},a.fbind=function(t){var e=a(t),n=W(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(W(arguments))])}},d.prototype.fbind=function(){var t=this,e=W(arguments);return function(){return t.dispatch("apply",[this,e.concat(W(arguments))])}},a.keys=function(t){return a(t).dispatch("keys",[])},d.prototype.keys=function(){return this.dispatch("keys",[])},a.all=I,d.prototype.all=function(){return I(this)},a.any=P,d.prototype.any=function(){return P(this)},a.allResolved=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(q,"allResolved","allSettled"),d.prototype.allResolved=function(){return q(this)},a.allSettled=M,d.prototype.allSettled=function(){return this.then(function(t){return I(z(t,function(t){function e(){return t.inspect()}return t=a(t),t.then(e,e)}))})},a.fail=a.catch=function(t,e){return a(t).then(void 0,e)},d.prototype.fail=d.prototype.catch=function(t){return this.then(void 0,t)},a.progress=B,d.prototype.progress=function(t){return this.then(void 0,void 0,t)},a.fin=a.finally=function(t,e){return a(t).finally(e)},d.prototype.fin=d.prototype.finally=function(t){return t=a(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},a.done=function(t,e,n,r){return a(t).done(e,n,r)},d.prototype.done=function(t,e,n){var o=function(t){a.nextTick(function(){if(r(t,i),!a.onerror)throw t;a.onerror(t)})},i=t||e||n?this.then(t,e,n):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},a.timeout=function(t,e,n){return a(t).timeout(e,n)},d.prototype.timeout=function(t,e){var n=f(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},a.delay=function(t,e){return void 0===e&&(e=t,t=void 0),a(t).delay(e)},d.prototype.delay=function(t){return this.then(function(e){var n=f();return setTimeout(function(){n.resolve(e)},t),n.promise})},a.nfapply=function(t,e){return a(t).nfapply(e)},d.prototype.nfapply=function(t){var e=f(),n=W(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},a.nfcall=function(t){var e=W(arguments,1);return a(t).nfapply(e)},d.prototype.nfcall=function(){var t=W(arguments),e=f();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},a.nfbind=a.denodeify=function(t){var e=W(arguments,1);return function(){var n=e.concat(W(arguments)),r=f();return n.push(r.makeNodeResolver()),a(t).fapply(n).fail(r.reject),r.promise}},d.prototype.nfbind=d.prototype.denodeify=function(){var t=W(arguments);return t.unshift(this),a.denodeify.apply(void 0,t)},a.nbind=function(t,e){var n=W(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(W(arguments)),i=f();return o.push(i.makeNodeResolver()),a(r).fapply(o).fail(i.reject),i.promise}},d.prototype.nbind=function(){var t=W(arguments,0);return t.unshift(this),a.nbind.apply(void 0,t)},a.nmapply=a.npost=function(t,e,n){return a(t).npost(e,n)},d.prototype.nmapply=d.prototype.npost=function(t,e){var n=W(e||[]),r=f();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},a.nsend=a.nmcall=a.ninvoke=function(t,e){var n=W(arguments,2),r=f();return n.push(r.makeNodeResolver()),a(t).dispatch("post",[e,n]).fail(r.reject),r.promise},d.prototype.nsend=d.prototype.nmcall=d.prototype.ninvoke=function(t){var e=W(arguments,1),n=f();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},a.nodeify=L,d.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){a.nextTick(function(){t(null,e)})},function(e){a.nextTick(function(){t(e)})})};var it=s();return a}()}();try{!function(t,e,n){function r(){var t=e.createElement("iframe");t.style.display="none",e.body.appendChild(t),m=t.contentWindow.XMLHttpRequest}function o(n,r,o){var i=g.defer();if(m&&"withCredentials"in new m){var c=new m;c.open(n,k+r,!0),c.withCredentials=!0,"POST"===n&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(t){if(4===c.readyState)if([200,304].indexOf(c.status)>-1){var e;try{e=JSON.parse(c.responseText),i.resolve(e)}catch(t){i.reject("Bad JSON"+c.status+" for "+k+r)}}else 204===c.status?i.resolve():i.reject("Bad HTTP "+c.status+" for "+k+r)},c.send(o||null)}else{w.warn("CORS not supported");var u,s,a,f=function(n){delete t[n];var r=e.getElementById(n);r&&r.parentNode&&r.parentNode.removeChild(r)};if(0===r.indexOf("/api/sync/")){u="_ygritte_callback"+Math.floor(17592186044416*Math.random()+1).toString(16),t[u]=function(t){w.warn(u.toString(),t),i.resolve(t),f(u)},r=r+(o?"&"+o:"")+"&callback="+u,s=e.createElement("script"),s.onerror=function(){f(u),i.reject()},s.async=!0,s.defer=!0,s.id=u,s.src=k+r;var p=e.getElementsByTagName("script")[0];p.parentNode.insertBefore(s,p)}else a=new Image,a.onload=function(){i.resolve()},a.onerror=function(){i.reject("img onerror "+a.src)},a.src=k+r+"?"+o+"&px=1"}return i.promise}function i(t){return o("GET",t)}function c(t,e){return o("POST",t,j.querystring.stringify(e))}function u(t,e){var n=function(){return JSON.stringify(t).length};return n()>e&&delete t.page_referrer,n()>e&&(t.page_url=t.page_url.substr(0,t.page_url.length-(n()-e))),t}function s(t){if(0!==t.length)for(var e=0;e<t.length;e++)pixel=t[e],w.log("pixel",pixel),function(){var t=pixel;setTimeout(function(){(new Image).src=t},25)}()}function a(o){if(w.log("init()",o),E)return void w.error("token already specified");if(j._.isNative(m)||r(),o.token?R=o.token:o.token=R,!R)return void w.error("no token specified");if(E=!0,T=j._.isObject(o)?o:{token:R},S=JSON.parse(JSON.stringify(T)),S.user_agent=navigator.userAgent,S.page_url||(S.page_url=t.location.href),S.page_referrer||(S.page_referrer=e.referrer),S.viewport_width||(S.viewport_width=Math.max(e.documentElement.clientWidth,t.innerWidth||0)),S=u(S,1950),w.log("/api/sync/ sent",T),O=i("/api/sync/1/?json="+n(JSON.stringify(T))).then(function(t){var e=g.defer();return w.info("/api/sync/ returned",t),t&&t.vid?(t.vid,e.resolve(S),t.pixels&&s(t.pixels)):(w.warn("blocked"),e.resolve()),e.promise}).then(function(t){t&&f().then(function(t){t.pixels&&s(t.pixels)})},function(t){throw w.error(t),t}),_.length)for(;_.length;){var c=_.shift();d(c[0],c[1])}}function f(){return w.log("logPageView()",S),c("/api/page-view/1/",S)}function p(t){w.log("updateVisitor()",t);var e=t;return e.token=R,c("/api/visitor/1/",e)}function l(t){w.log("goal()",t);var e={};e=t,e.token=R;for(var r=1;r<=8;r++)!function(){var t=r;setTimeout(function(){(new Image).src=k+"/api/goal/2/"+t+"/?px=1&json="+n(JSON.stringify(e))+"&"+Math.floor(17592186044416*Math.random()+1).toString(16)},25)}()}function d(t,e){if("init"===t){if(O)return;a(e)}else if(O)"props"===t||"properties"===t?O.then(function(){w.log("running props from bigPromiseQ"),p(e).then(function(t){t.pixels&&s(t.pixels)})}):"goal"===t&&O.then(function(){w.log("running goal from bigPromiseQ"),l(e)});else{var n=[t,e];w.log("no bigPromise yet, queueing",n),_.push(n)}}function h(){O||e.querySelector("[data-ygritte-init]")||d("init",{});for(var t,n,r=e.querySelectorAll("[data-ygritte-init],[data-ygritte-goal],[data-ygritte-props]"),o=0;o<r.length;o++)if(t=r[o],n=t.attributes,"none"===t.style.display.toLowerCase()||"script"===t.tagName.toLowerCase()){if(n["data-ygritte-processed"])continue;t.setAttribute("data-ygritte-processed",""),v(t)}else{if(n["data-ygritte-deferred"])continue;t.setAttribute("data-ygritte-deferred",""),t.addEventListener("click",y,!1)}}function y(t){var e=t.currentTarget;v(e),e.removeEventListener("click",y,!1)}function v(t){if(t&&t.attributes)for(var e,n,r=t.attributes,o=0;o<r.length;o++)e=r[o],n=e.name.split("data-ygritte-"),n[1]&&e.value&&d(n[1],JSON.parse(e.value))}if("JSON"in t&&!("ygrittelib"in t&&t.ygrittelib.version)){var g=t.ygritte__Q;delete t.ygritte__Q;var m=t.XMLHttpRequest,w={error:function(){},info:function(){},log:function(){},warn:function(){}},j={};"now"in Date||(Date.now=function(){return(new Date).getTime()}),j._={isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},isString:function(t){return"string"==typeof t||t instanceof String},includes:function(t,e){var n=Object(t),r=parseInt(n.length)||0;if(0===r)return!1;var o;o=0;for(var i;o<r;){if(i=n[o],e===i||e!==e&&i!==i)return!0;o++}return!1},isNative:function(t){var e=Object.prototype.toString,n=Function.prototype.toString,r=/^\[object .+?Constructor\]$/,o=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(t){var i=typeof t;return"function"==i?o.test(n.call(t)):t&&"object"==i&&r.test(e.call(t))||!1}(t)}},j.event={add:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}},j.timing={_list:{},_nowOffset:0,start:function(t){return this._list[t]=this.now(),Math.floor(this._list[t])},finish:function(t){return Math.floor(this.now()-(this._list[t]||0))},now:function(){return Date.now()-this._nowOffset}},j.timing._nowOffset=(new Date).getTime(),j.jslog={_logOnceIdents:[],_call:function(t,e){(new Image).src=k+"/jslogger/?ident="+n(t)+"&message="+n(JSON.stringify(e))},log:function(n,r){var o={};o=r?j._.isString(r)?{message:r}:r:{message:"missing log() message"},o.url=t.location.href,o.now=Date.now();var i=this;"complete"===e.readyState?setTimeout(function(t,e,n){t._call(e,n)},100,i,n,o):j.event.add(t,"load",function(t){setTimeout(function(t,e,n){t._call(e,n)},100,i,n,o)})},logOnce:function(t,e){j._.includes(this._logOnceIdents,t)?w.warn("logOnce() already called for "+t):(this._logOnceIdents.push(t),this.log(t,e))}},j.hash={_obj:void 0,getValue:function(e){return this._obj||(this._obj=this.from(t.location.hash)),this._obj[e]},from:function(t){var e,n={};if(t.length&&0===t.indexOf("#ygritte/")){e=t.split("/");for(var r,o=1;o<e.length;o++)r=e[o],r.length&&("stg"===r||"qa"===r?(n.host="stg.edkay.com",n.stg=!0):"localhost"===r?n.host=r:r.indexOf(".")>=0?n.host=r:r.indexOf(":")>=0?n.host=r:n[r]=!!r)}return n}},j.urlparser={regx:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,get:function(t){var e=this.regx.exec(t);return{href:e[0],withoutHash:e[1],url:e[2],origin:e[3],protocol:e[4],protocolseparator:e[5],credhost:e[6],cred:e[7],user:e[8],pass:e[9],host:e[10],hostname:e[11],port:e[12],pathname:e[13],segment1:e[14],segment2:e[15],search:e[16],hash:e[17]}}},j.cookie={set:function(t,n,r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);var i="expires="+o.toUTCString();e.cookie=t+"="+n+"; "+i+"; path=/;"},get:function(t){for(var n=t+"=",r=e.cookie.split(";"),o=0;o<r.length;o++){for(var i=r[o];" "==i.charAt(0);)i=i.substring(1);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return""}},function(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var t={};t.parse=function(e,n,r){n=n||"&",r=r||"=";for(var o,i={},c=0,u=e.split(n),s=u.length;c<s;c++)o=u[c].split(r),o.length>0&&(i[t.unescape(o.shift())]=t.unescape(o.join(r)));return i},t.unescape=function(t){return decodeURIComponent(t.replace(/\+/g," "))},t.stringify=function(t,e){function r(t,e,n){var o,i,c,u;if(u=/\[\]$/,e instanceof Array)for(i=0,c=e.length;i<c;i++)u.test(t)?n(t,e[i]):r(t+"["+("object"==typeof e[i]?i:"")+"]",e[i],n);else if("object"==typeof e)for(o in e)r(t+"["+o+"]",e[o],n);else n(t,e)}return function(t){var e,o,i,c,u;if(o=[],u=/%20/g,i=function(t,e){e="function"==typeof e?e():null==e?"":e,o[o.length]=n(t)+"="+n(e)},t instanceof Array)for(c in t)i(c,t[c]);else for(e in t)r(e,t[e],i);return o.sort(),o.join("&").replace(u,"+")}(t)},j.querystring=t}(),"console"in t&&j.hash.getValue("debug")&&(w="function"==typeof t.console.log.apply?{error:function(){t.console.error.apply(t.console,["ygritte:"].concat(Array.prototype.slice.call(arguments)))},info:function(){t.console.info.apply(t.console,["ygritte:"].concat(Array.prototype.slice.call(arguments)))},log:function(){t.console.log.apply(t.console,["ygritte:"].concat(Array.prototype.slice.call(arguments)))},warn:function(){t.console.warn.apply(t.console,["ygritte:"].concat(Array.prototype.slice.call(arguments)))}}:{error:function(){t.console.error(Array.prototype.slice.call(arguments))},info:function(){t.console.info(Array.prototype.slice.call(arguments))},log:function(){t.console.log(Array.prototype.slice.call(arguments))},warn:function(){t.console.warn(Array.prototype.slice.call(arguments))}});var k,b,x=j.hash.getValue("host");if(b=e.getElementById("ygritte-js")||e.querySelector("script[src$='/j/5c0c64023fb8062832eea2c3a91242d7/ygritte.js']"),x&&"s.edkay.com"!==x)return k="https://"+x,function(t,e,n){var r,o=t.getElementsByTagName(e)[0];r=t.createElement(e),r.id="ygritte-js",r.src=k+"/j/v/nocache/4f7d833fd1a11aae3d591ca012cd7848/ygritte.js",o.parentNode.insertBefore(r,o)}(e,"script"),b&&(b.id="",b.src=""),void w.log("reloading from "+k+"/j/v/nocache/4f7d833fd1a11aae3d591ca012cd7848/ygritte.js");k="https://s.edkay.com",j.version="2.0",t.ygrittelib=j;var O,T,S,_=[],R="5c0c64023fb8062832eea2c3a91242d7",E=!1;!function(){if(t.ygritte&&t.ygritte.q)for(;t.ygritte.q.length;){var e=t.ygritte.q.shift();d(e[0],e[1])}t.ygritte=function(t,e){d(t,e)}}(),"complete"===e.readyState&&e.querySelector("body")&&h(),e.addEventListener("DOMContentLoaded",function(){h(),setTimeout(h,1e3)}),t.addEventListener("load",function(){h(),setTimeout(h,1e3),setTimeout(h,5e3)})}}(window,document,encodeURIComponent)}catch(t){}